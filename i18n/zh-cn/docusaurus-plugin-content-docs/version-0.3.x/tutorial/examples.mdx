---
id: examples
sidebar_label: 范例
title: 范例工程
description: 测试本项目的范例工程。
slug: /examples
---

import IconExternalLink from "@theme/Icon/ExternalLink";
import mdiLanguagePython from "@iconify-icons/mdi/language-python";

import DarkButton from "@site/src/components/DarkButton";
import {rootURL} from "@site/src/envs/variables";

# 范例工程

## `dash`版本范例工程 {#example-for-dash-users}

安装`dash_json_grid`后，可以测试以下范例工程：

<p>
  <DarkButton to={rootURL("usage.py")} icon={mdiLanguagePython}>
    {"usage.py"}
  </DarkButton>
</p>

该应用提供了以下功能：

1. 用来搜索和高亮关键字的搜索框。
2. 用来切换主题的选择框。
3. 点选所显示的数据的任何部分后，被选中的区域将会导出并展示一条路径。
4. 选中任何数字时，该数字将会自增`1`。

其余的特性已经在[用法指南](/docs/category/usages)中介绍了。本范例工程还展示了，如何使用
callback提供的`selected_path`来修改数据的**值**。参见以下部分：

```python title="usage.py" showLineNumbers
...
@callback(
    Output("selected-path", "children"),
    Output("selected-val", "children"),
    Output("viewer", "data"),
    Input("viewer", "selected_path"),
    State("viewer", "data"),
)
def display_output(route, data):
    if not route:
        return None, None, dash.no_update

    sel_data = dash_json_grid.DashJsonGrid.get_data_by_route(data, route)
    if isinstance(sel_data, (int, float)):
        sel_data_new = sel_data + 1
        dash_json_grid.DashJsonGrid.update_data_by_route(data, route, sel_data_new)
        return str(route), str(sel_data_new), data

    return str(route), str(sel_data), dash.no_update
...
```

其中，[`get_data_by_route`](../apis/DashJsonGrid.mdx#-get_data_by_route)和
[`update_data_by_route`](../apis/DashJsonGrid.mdx#-update_data_by_route)皆是类方法。
前者通过`route`参数定位了`data`的某个特定部分。后者将`route`所定位的数据进行了更新。

:::info

形如[`get_data_by_route`](../apis/DashJsonGrid.mdx#-get_data_by_route)的类方法是本Dash
版本的组件所独有的。换言之，[`react-json-grid`<IconExternalLink/>][git-react-json-grid]的
用户需要自行实现上述用来定位、修改部分数据值的逻辑。

:::

## 更多范例 {#more-examples}

在[API文档](../apis/DashJsonGrid.mdx#examples)中，还有更多范例。这些范例主要是一些有用的
代码片段，可作参考。

## 纯React实现的范例 {#example-purely-based-on-react}

:::warning

该范例只能在开发源码的过程中使用。换言之，React版的范例、同时也是完全面向开发者的。

:::

要运行该范例，需要确保已经安装以下软件：

- [Git<IconExternalLink/>][link-git]
- [NodeJS<IconExternalLink/>][link-nodejs]
- [Yarn<IconExternalLink/>][link-yarn]

确认无虞后，运行以下命令以clone项目和运行范例：

```shell
git clone https://github.com/cainmagi/dash-json-grid
cd dash-json-grid
python -m pip install -r requirements.txt -r tests/requirements.txt
yarn install
yarn start
```

总之，该范例包含了大部分`usage.py`范例所实现的功能。然而，作为一个完全由React实现的范例，
它并未提供任何捕获、或是修改所选数据的功能。

:::info

从某种程度上说，[简介](../introduction.mdx)展示的范例、和本页面展示的范例，其实是一样的。
然而，囿于文档的功能有限，文档中的实时范例、总是和最新版同步。即使当前查看的文档是旧版文档，
这一点也不会变。因此，如果需要了解某个版本确切的效果，透过对应版本、运行范例工程无疑是更好的
选择。

:::

[git-react-json-grid]: https://github.com/RedHeadphone/react-json-grid
[link-git]: https://git-scm.com/downloads
[link-nodejs]: https://nodejs.org/en/download/package-manager
[link-yarn]: https://yarnpkg.com/getting-started/install
